<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>None Order Stake - UchuAddon</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ã‚µã‚¤ã‚³ãƒ­æ¼”å‡ºç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #dice-canvas-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        #dice-canvas-container.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .dice-bowl-bg {
            position: absolute;
            width: 480px;
            height: 480px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            background: radial-gradient(circle, #b91c1c 0%, #7f1d1d 75%, #450a0a 100%);
            box-shadow: 0 0 80px rgba(0,0,0,0.6);
            border: 4px solid rgba(255,255,255,0.1);
            z-index: 0;
        }
        
        #diceCanvas {
            position: relative;
            z-index: 10;
        }
        
        #dice-result-display {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 30px rgba(255,255,255,0.4), 0 8px 0 #1e293b;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 20;
            pointer-events: none;
            max-width: 90%;
            text-align: center;
            word-break: break-word;
        }
        
        #dice-result-display.show {
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }
        
        #dice-result-display.shonben {
            color: #facc15;
            text-shadow: 0 0 20px rgba(250, 204, 21, 0.5);
        }
    </style>
</head>
<body>
    <!-- ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒŠï¼ˆ16:9ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼‰ -->
    <div class="game-container">
        
        <!-- é€šçŸ¥ã‚³ãƒ³ãƒ†ãƒŠ -->
        <div id="notification-container"></div>

        <!-- ã‚µã‚¤ã‚³ãƒ­æ¼”å‡ºç”¨Canvas -->
        <div id="dice-canvas-container">
            <div class="dice-bowl-bg" id="dice-bowl-bg"></div>
            <canvas id="diceCanvas"></canvas>
            <div id="dice-result-display"></div>
        </div>

        <!-- ========================================
             ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
        ======================================== -->
        <div id="screen-title" class="screen">
            <h1 class="title-logo">None Order Stake</h1>
            <p class="title-subtitle">ï½ã‚¤ã‚«ã‚µãƒä¸Šç­‰ï½</p>
            
            <div class="rules-summary">
                <p><strong style="color: #d4af37;">ã€ãƒ«ãƒ¼ãƒ«ã€‘</strong></p>
                <p>ãƒ»ç›®æ¨™é‡‘é¡ <strong style="color: #4ade80;">100,000å††</strong> ã‚’é”æˆã›ã‚ˆ</p>
                <p>ãƒ»å…¨15è©¦åˆã‚’æˆ¦ã„æŠœã‘</p>
                <p>ãƒ»æ‰€æŒé‡‘ãŒ <strong style="color: #f87171;">1,000å††æœªæº€</strong> ã§æ•—åŒ—</p>
                <p>ãƒ»åŒç‚¹ã®å ´åˆã¯CPUã®å‹ã¡</p>
                <p style="margin-top: 0.5rem; color: #a09080; font-size: 0.85em;">â€»åºç›¤ã¯ã‚¤ã‚«ã‚µãƒä½¿ç”¨ä¸å¯</p>
            </div>
            
            <button id="btn-start">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
        </div>

        <!-- ========================================
             ã‚²ãƒ¼ãƒ ç”»é¢
        ======================================== -->
        <div id="screen-game" class="screen hidden">
            <!-- å½¹è¡¨ï¼ˆå·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰ -->
            <div id="role-table">
                <!-- JSã§å‹•çš„ç”Ÿæˆ -->
            </div>

            <!-- ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ï¼ˆä¸­å¤®ï¼‰ -->
            <div class="game-area">
                <!-- çš¿ã‚¨ãƒªã‚¢ -->
                <div class="plates-container">
                    <!-- CPUï¼ˆè¦ªï¼‰ã®çš¿ -->
                    <div class="plate-wrapper">
                        <span class="plate-label">CPUï¼ˆè¦ªï¼‰</span>
                        <div id="cpu-plate" class="plate">
                            <div class="cpu-dice dice-container">
                                <div class="dice">?</div>
                                <div class="dice">?</div>
                                <div class="dice">?</div>
                            </div>
                        </div>
                        <div id="cpu-role" class="role-display"></div>
                    </div>

                    <!-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®çš¿ -->
                    <div class="plate-wrapper">
                        <span class="plate-label">ã‚ãªãŸ</span>
                        <div id="player-plate" class="plate">
                            <div class="player-dice dice-container">
                                <div class="dice">?</div>
                                <div class="dice">?</div>
                                <div class="dice">?</div>
                            </div>
                        </div>
                        <div id="player-role" class="role-display"></div>
                    </div>
                </div>

                <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ -->
                <div class="action-area">
                    <!-- è³­ã‘UI -->
                    <div id="betting-ui">
                        <h3>è³­ã‘é‡‘ã‚’æ±ºã‚ã‚</h3>
                        <div class="bet-slider-container">
                            <input type="range" id="bet-slider" min="100" max="10000" value="1000" step="100">
                        </div>
                        <div class="bet-display">
                            <span id="bet-display">1,000</span>å††
                        </div>
                        <button id="btn-confirm-bet">æ±ºå®š</button>
                    </div>

                    <!-- ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹UI -->
                    <div id="rolling-ui" class="hidden">
                        <button id="btn-roll">ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹</button>
                    </div>
                </div>
            </div>

            <!-- æƒ…å ±ãƒ‘ãƒãƒ«ï¼ˆå³ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰ -->
            <div class="info-panel">
                <div class="info-card">
                    <h4>ç›®æ¨™é‡‘é¡</h4>
                    <div class="info-value" style="color: #d4af37;">
                        <span id="target-money">100,000</span>å††
                    </div>
                </div>
                
                <div class="info-card">
                    <h4>ã‚ãªãŸã®æ‰€æŒé‡‘</h4>
                    <div class="info-value player-money">
                        <span id="player-money">10,000</span>å††
                    </div>
                </div>
                
                <div class="info-card">
                    <h4>CPUã®æ‰€æŒé‡‘</h4>
                    <div class="info-value cpu-money">
                        <span id="cpu-money">10,000</span>å††
                    </div>
                </div>
                
                <div class="info-card">
                    <h4>ç¾åœ¨ã®è©¦åˆ</h4>
                    <div class="info-value">
                        <span id="current-match">1</span> / <span id="total-matches">15</span>
                    </div>
                </div>
                
                <div class="info-card">
                    <h4>ãƒ•ã‚§ãƒ¼ã‚º</h4>
                    <div id="phase-name" class="info-value" style="font-size: 1rem;">é€šå¸¸æˆ¦</div>
                </div>
            </div>
        </div>

        <!-- ã‚¤ã‚«ã‚µãƒé¸æŠãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="cheat-container" class="hidden">
            <div class="cheat-panel">
                <h3>ã‚¤ã‚«ã‚µãƒã‚’é¸æŠ</h3>
                <div id="cheat-list">
                    <!-- JSã§å‹•çš„ç”Ÿæˆ -->
                </div>
                <button id="btn-skip-cheat">ã‚¤ã‚«ã‚µãƒã—ãªã„</button>
            </div>
        </div>

        <!-- æŒ¯ã‚Šç›´ã—ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="retry-modal" class="hidden">
            <div class="retry-panel">
                <h3>æŒ¯ã‚Šç›´ã—ã¾ã™ã‹ï¼Ÿ</h3>
                <p>æ®‹ã‚ŠæŒ¯ã‚Šç›´ã—å›æ•°: <span id="retry-count">2</span>å›</p>
                <div class="retry-buttons">
                    <button id="retry-yes">æŒ¯ã‚Šç›´ã™</button>
                    <button id="retry-no">ãã®ã¾ã¾</button>
                </div>
            </div>
        </div>

        <!-- è©¦åˆçµæœ -->
        <div id="match-result" class="hidden">
            <!-- JSã§å‹•çš„ç”Ÿæˆ -->
        </div>

        <!-- æ¬¡ã®è©¦åˆãƒœã‚¿ãƒ³ -->
        <button id="btn-next-match" class="hidden" style="position: absolute; bottom: 1.5rem; left: 50%; transform: translateX(-50%); z-index: 60;">
            æ¬¡ã®è©¦åˆã¸
        </button>

        <!-- ========================================
             ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢
        ======================================== -->
        <div id="screen-gameover" class="screen hidden">
            <h1>GAME OVER</h1>
            <div class="final-stats">
                <p class="label">æœ€çµ‚æ‰€æŒé‡‘</p>
                <p class="value"><span id="final-money">0</span>å††</p>
            </div>
            <p style="color: #a09080; margin-bottom: 1.5rem;">ç›®æ¨™é‡‘é¡ã«ã¯å±Šã‹ãªã‹ã£ãŸ...</p>
            <button id="btn-retry">ãƒªãƒˆãƒ©ã‚¤</button>
        </div>

        <!-- ========================================
             å‹åˆ©ç”»é¢
        ======================================== -->
        <div id="screen-victory" class="screen hidden">
            <h1>ğŸ‰ VICTORY! ğŸ‰</h1>
            <div class="final-stats">
                <p class="label">æœ€çµ‚æ‰€æŒé‡‘</p>
                <p class="value" style="color: #4ade80;"><span id="victory-money">0</span>å††</p>
            </div>
            <p style="color: #d4af37; margin-bottom: 1.5rem;">ç›®æ¨™é”æˆï¼ãŠã‚ã§ã¨ã†ï¼</p>
            <button id="btn-retry-victory">ã‚‚ã†ä¸€åº¦</button>
        </div>

    </div><!-- /.game-container -->

    <!-- ã‚µã‚¤ã‚³ãƒ­ã‚·ã‚¹ãƒ†ãƒ çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script src="js/dice-roller.js"></script>
    
    <!-- ã‚²ãƒ¼ãƒ ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script type="module" src="js/main.js"></script>
</body>
</html>