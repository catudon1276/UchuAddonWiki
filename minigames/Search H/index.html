<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Search H</title>
    <link rel="icon" type="image/png" href="/UchuAddonWiki/resource/UchuLogo.png">            
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="app-wrapper">
        <div id="external-header">
            <div class="info-panel">
                <div class="text-[10px] text-slate-400 font-black uppercase tracking-widest">Score</div>
                <div id="score-display" class="text-2xl sm:text-3xl font-black">0</div>
            </div>

            <div class="target-panel">
                <div class="text-[10px] text-blue-400 font-black uppercase tracking-widest mb-1">Target</div>
                <div id="target-preview"></div>
            </div>

            <div id="timer-panel" class="info-panel">
                <div class="text-[10px] text-slate-400 font-black uppercase tracking-widest">Time</div>
                <div id="timer-display" class="text-2xl sm:text-3xl font-black tabular-nums">00.0</div>
            </div>
        </div>

        <div id="viewport-container">
            <div id="viewport">
                <!-- Spotlight Sequence Layer (対象開示フェーズ) -->
                <div id="spotlight-screen">
                    <div id="spotlight-info">
                        <div id="spotlight-level">LEVEL 1</div>
                    </div>
                    <!-- レイヤー順: 白い円(z:1) → 影(z:1.5) → 対象物(z:2) → 黒マスク(z:3) -->
                    <div id="spotlight-white-left"></div>
                    <div id="spotlight-white-right"></div>
                    <div id="spotlight-shadow"></div>
                    <div id="spotlight-target"></div>
                    <canvas id="spotlight-canvas"></canvas>
                </div>

                <div id="flash-layer" class="absolute inset-0 pointer-events-none z-[500]"></div>
                <div id="world"></div>

                <div id="overlay-screen">
                    <div id="start-content" class="modal-card">
                        <h1 class="text-5xl font-black mb-1 text-white italic tracking-tighter">Search H</h1>
                        <p class="text-slate-500 text-xs font-black tracking-[0.3em] uppercase mb-4">難易度を選択</p>

                        <div class="difficulty-selector">
                            <div class="arrow-btn" id="prev-diff">◀</div>
                            <div class="flex-1">
                                <div id="diff-name" class="text-3xl font-black mb-1">NORMAL</div>
                                <div id="diff-desc" class="text-[11px] text-slate-400 italic">ミス: -5秒 / 初期: 45秒</div>
                            </div>
                            <div class="arrow-btn" id="next-diff">▶</div>
                        </div>

                        <button id="start-btn" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-black py-6 rounded-3xl shadow-xl active:scale-95 transition-all text-2xl mt-4">
                            MISSION START
                        </button>

                        <button id="back-wiki-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-black py-4 rounded-2xl shadow-lg active:scale-95 transition-all text-lg mt-3">
                            Back Wiki
                        </button>
                    </div>

                    <div id="clear-content" class="modal-card hidden">
                        <h1 id="clear-title" class="text-3xl font-black mb-2 text-white italic">LEVEL CLEAR!</h1>
                        <div id="clear-time" class="text-yellow-400 font-black text-2xl mb-2">Time: 0.00s</div>
                        <div class="text-emerald-400 font-black text-xl mb-8">+10.0s RECOVERY</div>
                        <button id="next-btn" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-black py-5 rounded-2xl shadow-lg active:scale-95 transition-all text-xl">
                            NEXT AREA
                        </button>
                    </div>

                    <div id="gameover-content" class="modal-card hidden">
                        <h1 id="gameover-title" class="text-4xl font-black mb-4 text-rose-500 italic">TIME OVER</h1>

                        <!-- 難易度表示 -->
                        <div id="result-difficulty" class="text-lg font-black mb-3 text-blue-400">NORMAL</div>

                        <div class="mb-6 py-5 bg-black/20 rounded-3xl">
                            <p id="final-score" class="text-6xl font-black text-white mt-2">0</p>
                            <p class="text-slate-400 text-xs font-bold tracking-widest uppercase mt-2">Levels Completed</p>
                        </div>

                        <!-- クリア時間とランク -->
                        <div class="flex justify-center gap-6 mb-6">
                            <div class="text-center">
                                <p class="text-slate-400 text-xs font-bold tracking-widest uppercase">Total Time</p>
                                <p id="result-time" class="text-2xl font-black text-white">0:00</p>
                            </div>
                            <div class="text-center">
                                <p class="text-slate-400 text-xs font-bold tracking-widest uppercase">Rank</p>
                                <p id="result-rank" class="text-3xl font-black text-yellow-400">-</p>
                            </div>
                        </div>

                        <button id="retry-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-black py-5 rounded-2xl shadow-lg active:scale-95 transition-all text-xl">
                            BACK TO TITLE
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="characterParts.js"></script>
    <script src="gameEvents.js"></script>
    <script src="game.js"></script>
</body>
</html>
