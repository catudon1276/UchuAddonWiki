<!-- UCHU ADDON - COMMON HEADER -->
<header class="uchu-header">
    <nav class="uchu-nav">
        <a href="#" id="logoLink">
            <img src="#" alt="UchuAddon Logo" class="uchu-logo" id="logoImg">
        </a>
        
        <button class="uchu-menu-toggle" id="menuToggle" aria-label="メニュー">
            <i class="fas fa-bars"></i>
        </button>
        
        <ul class="uchu-nav-links" id="navLinks">
            <li><a href="#" class="uchu-nav-link" data-page="index">トップ</a></li>
            <li><a href="#" class="uchu-nav-link" data-page="roles">役職</a></li>
            <li><a href="#" class="uchu-nav-link" data-page="gallery">ギャラリー</a></li>
        </ul>
    </nav>
</header>

<script>
// ページの階層を検出
const currentPath = window.location.pathname;
let basePath = '';

if (currentPath.includes('/roles/')) {
    basePath = '../';
} else if (currentPath.includes('/gallery/')) {
    basePath = '../';
} else {
    basePath = '';
}

// ロゴのパスを設定
document.getElementById('logoLink').href = basePath + 'index.html';
document.getElementById('logoImg').src = basePath + 'resource/UchuAddonTitleLogo.png';

// ナビゲーションリンクを設定
document.querySelectorAll('.uchu-nav-link').forEach(link => {
    const page = link.dataset.page;
    if (page === 'index') {
        link.href = basePath + 'index.html';
    } else if (page === 'roles') {
        link.href = basePath + 'roles/index.html';
    } else if (page === 'gallery') {
        link.href = basePath + 'gallery/index.html';
    }
});

// Mobile menu toggle
document.getElementById('menuToggle')?.addEventListener('click', function() {
    const navLinks = document.getElementById('navLinks');
    navLinks.classList.toggle('active');
    this.querySelector('i').classList.toggle('fa-bars');
    this.querySelector('i').classList.toggle('fa-times');
});

// Set active nav link
document.querySelectorAll('.uchu-nav-link').forEach(link => {
    const page = link.dataset.page;
    if ((page === 'roles' && currentPath.includes('roles')) ||
        (page === 'gallery' && currentPath.includes('gallery')) ||
        (page === 'index' && !currentPath.includes('roles') && !currentPath.includes('gallery'))) {
        link.classList.add('active');
    }
});

// Close mobile menu on link click
document.querySelectorAll('.uchu-nav-links a').forEach(link => {
    link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
            document.getElementById('navLinks').classList.remove('active');
            document.getElementById('menuToggle').querySelector('i').classList.add('fa-bars');
            document.getElementById('menuToggle').querySelector('i').classList.remove('fa-times');
        }
    });
});
</script>